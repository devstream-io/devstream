name: license check by FOSS
on:
  pull_request_target

jobs:
  fossa:
    runs-on: ubuntu-latest
    env:
      SECRETS_FOSSA_API_KEY: ${{ secrets.FOSSA_PUSH_ONLY_API_KEY }}
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - uses: fossa-contrib/fossa-action@v1
        run: echo ${{ env.SECRETS_FOSSA_API_KEY }}
        with:
          # https://docs.fossa.com/docs/api-reference#push-only-api-token
            fossa-api-key: ${{ env.SECRETS_FOSSA_API_KEY }}
